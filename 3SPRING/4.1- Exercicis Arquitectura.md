---
title: 4.1 Exercicis Arquitectura. 
parent: 4. IoC i DI.

has_children: true
layout: default
nav_order: 10

---


## **Estructura de Spring, Arquitectura MVC i Injecció de Dependències**

---

### **Exercici 1. Estructura d’un projecte Spring**



Observa la següent estructura d’un projecte Spring Boot:

```text
com.exemple.demo
 ├─ controller
 ├─ service
 ├─ repository
 ├─ model
 └─ DemoApplication.java
```

### Tasques

1. Explica quina funció té cadascun dels paquets:

   * `controller`
   * `service`
   * `repository`
   * `model`
2. Indica quines relacions hi ha entre aquestes capes.
3. Explica quines accions **no hauria de fer mai**:

   * un controlador
   * un servei
   * un repositori

---

## **Exercici 2. Identificar el rol de cada classe**

### Enunciat

Es donen les següents classes d’una aplicació Spring:

* `UsuariController`
* `UsuariService`
* `UsuariRepository`
* `Usuari`



1. Indica quina anotació de Spring correspon a cada classe.
2. Explica per què no totes les classes porten la mateixa anotació.
3. Indica quines d’aquestes classes són gestionades pel contenidor IoC de Spring (beans).

---

## **Exercici 3. Detecció d’errors d’arquitectura**



Analitza el següent fragment de codi:

```java
@RestController
public class ProducteController {

    @Autowired
    private ProducteRepository repository;

    @GetMapping("/productes")
    public List<Producte> llistar() {
        return repository.findAll();
    }
}
```

### Tasques

1. Indica quin problema d’arquitectura presenta aquest codi.
2. Explica quina capa està faltant.
3. Descriu com hauria de ser l’estructura correcta (sense escriure tot el codi).

---

## **Exercici 4. De codi tradicional a IoC**



Observa el següent codi:

```java
public class Servei {

    private Repositori repositori = new Repositori();

    public void executar() {
        repositori.guardar();
    }
}
```

### Tasques

1. Reescriu aquest codi perquè utilitze Inversió de Control i Injecció de Dependències amb Spring.
2. Indica quines anotacions són necessàries.
3. Explica quina diferència conceptual hi ha entre aquest codi i la versió amb Spring.

---

## **Exercici 5. Completar una injecció per constructor**



Completa la següent classe perquè funcione correctament amb Injecció de Dependències:

```java
@Service
public class CiutatService {

    private CiutatRepository repository;

    // completa ací la injecció de dependències
}
```

### Tasques

1. Implementa la injecció per constructor.
2. Explica per què aquesta és la forma recomanada d’injecció en Spring.

---

## **Exercici 6. Arquitectura MVC**



Respon les següents preguntes:

1. Quina funció té cada part de l’arquitectura MVC?

   * Model
   * Vista
   * Controlador
2. En una API REST, quina part de l’arquitectura MVC no apareix de manera explícita?
3. Explica per què Spring separa aquestes responsabilitats.

---

## **Exercici 7. Raonament sobre IoC i DI**



Respon de manera raonada:

1. Què significa Inversió de Control?
2. Qui crea els objectes en una aplicació Spring Boot?
3. Per què no és recomanable crear objectes amb `new` dins d’un controlador o servei?
4. Per què la injecció directa en camps no és considerada una bona pràctica?

---

## **Exercici 8. Què passaria si…**



Explica què passaria en cadascun dels següents casos:

1. Elimines l’anotació `@Service` d’una classe de servei.
2. Crees un objecte amb `new` dins d’un controlador.
3. Una classe té dos constructors i cap d’ells porta `@Autowired`.

---

## **Exercici 9. Flux d’una petició en Spring**


Explica el recorregut d’una petició HTTP en una aplicació Spring Boot seguint aquest esquema:

```
Client → Controller → Service → Repository → Base de dades
```

### Tasques

1. Indica quin paper juga cada capa.
2. Explica en quin punt intervenen:

   * la Inversió de Control
   * la Injecció de Dependències
3. Relaciona aquest flux amb l’arquitectura MVC.

---

## **Exercici 10. Disseny d’un mini projecte**


Imagina que has de crear una aplicació Spring Boot per gestionar **llibres i autors**.

### Tasques

1. Proposa l’estructura de paquets del projecte.
2. Indica quines classes principals tindria l’aplicació.
3. Assigna l’anotació adequada a cada classe (`@RestController`, `@Service`, `@Repository`, etc.).
4. Explica com s’injectarien les dependències entre les diferents capes.

---

